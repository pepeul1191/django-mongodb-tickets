{% load static %} 
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
  <title>{% block title %}Mi Dashboard{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'dist/vendor.min.css' %}">
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
  
  {% block extra_css %}{% endblock %}
</head>

<body class="dashboard-layout">
  <div class="wrapper">
    <!-- Navbar Partial -->
    {% include 'partials/_navbar.html' %}

    <!-- Sidebar Partial -->
    {% include 'partials/_sidebar.html' %}

    <!-- Content Wrapper -->
    <div class="content-wrapper">
      {% block content %}{% endblock %}
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="{% static 'dist/vendor.js' %}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  const sidebarToggle = document.getElementById('sidebarToggle');
  const sidebar = document.querySelector('.sidebar');
  const mainContent = document.querySelector('.main-content');
  
  // Verificar el estado inicial en localStorage
  let isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
  
  // Función para actualizar el estado
  function updateSidebarState() {
    if (window.innerWidth <= 992) {
      // En móvil: siempre empezar colapsado
      sidebar.classList.add('collapsed');
    } else {
      // En desktop: usar el estado guardado
      sidebar.classList.toggle('collapsed', isCollapsed);
    }
  }
  
  // Aplicar estado inicial
  updateSidebarState();
  
  // Evento click del toggle
  sidebarToggle.addEventListener('click', function() {
    if (window.innerWidth <= 992) {
      // En móvil: toggle simple
      sidebar.classList.toggle('collapsed');
    } else {
      // En desktop: guardar preferencia
      isCollapsed = !isCollapsed;
      localStorage.setItem('sidebarCollapsed', isCollapsed);
      sidebar.classList.toggle('collapsed');
    }
  });
  
  // Cerrar sidebar al hacer clic en enlaces (solo móvil)
  document.querySelectorAll('.sidebar .nav-link').forEach(link => {
    link.addEventListener('click', function() {
      if (window.innerWidth <= 992) {
        sidebar.classList.add('collapsed');
      }
    });
  });
  
  // Actualizar al cambiar tamaño de pantalla
  window.addEventListener('resize', function() {
    updateSidebarState();
  });
});
  </script>
  {% block extra_js %}{% endblock %}
</body>
</html>